{% set vfTreeButton %}
<button href="{{ tree_example_href }}" class="vf-button vf-tree__button">
  <svg width="8" height="13" xmlns="http://www.w3.org/2000/svg"><g stroke="" stroke-width="1.6" fill="none" fill-rule="evenodd" stroke-linecap="square"><path d="M1.417 1.275L6 6.326M6 6.105l-4.583 5.61"/></g></svg>
</button>
{% endset %}

{% macro vfTreeList(list, currentDepth=1) %}
  <ul class="vf-tree__list {% if currentDepth > 1 %}vf-tree__list--additional{% endif %} vf-tree__list--{{ currentDepth }} | vf-list" aria-role="{% if currentDepth == 1 %}tree{% else %}group{% endif %}">
  {% for item in list %}
    <li class="vf-tree__item {%- if item.artiveTrail == true %} vf-tree__item--selected{% endif -%}{% if item.expanded == true %} | vf-tree__item--expanded{% endif -%}" {% if item.expanded == true %} data-vf-js-tree--collapsed="false"{% endif %} data-vf-js-tree aria-role="treeitem" aria-expanded="{{item.expanded}}>
      <a href="{{ tree_example_href }}" class="vf-tree__link" {%- if item.artiveTrail == true %} aria-current="page"{% endif %}>{{ item.title }}</a>
      {% if item.sublist %}{{ vfTreeButton }}{% endif %}
      {% if item.sublist %}
        {{ vfTreeList(item.sublist, currentDepth+1) }}
      {% endif %}
    </li>
  {% endfor %}
  </ul>
{% endmacro %}

<div class="vf-tree{% if expanded === false %} vf-tree--collapsed{% endif %}" data-vf-js-tree {% if expanded === false %}data-vf-js-tree--collapsed="true"{% endif %} aria-expanded="{{expanded}}">
  <div class="vf-tree__inner">
    <span class="vf-show-hide">
      <button class="vf-button | vf-show-hide__button" data-vf-js-tree--button>
        <svg width="13" height="13" xmlns="http://www.w3.org/2000/svg"><g stroke="" stroke-width="1.6" fill="none" fill-rule="evenodd" stroke-linecap="square"><path d="M6.583 11.725L2 6.674M2 6.895l4.583-5.61"/><path d="M11.583 11.725L7 6.674M7 6.895l4.583-5.61"/></g></svg>
      </button>
    </span>

    <ul class="vf-tree__list | vf-list" aria-role="tree">
      {{ vfTreeList(vf_tree_list) }}
    </ul>
  </div>
</div>
